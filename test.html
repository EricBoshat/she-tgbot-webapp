<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        #debug { 
            position: fixed; 
            top: 10px; 
            right: 10px; 
            background: red; 
            color: white; 
            padding: 5px 10px; 
            font-size: 12px; 
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div id="debug">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <!-- –í–∞—à–∞ —Ñ–æ—Ä–º–∞ –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ -->
    <button id="send" style="font-size:20px;padding:15px;">‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Telegram.WebApp
        const debug = document.getElementById('debug');
        
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            debug.textContent = '‚úÖ –ì–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ';
            debug.style.background = 'green';
        } else {
            debug.textContent = '‚ùå WebApp –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
            debug.style.background = 'red';
        }

        document.getElementById('send').onclick = () => {
            debug.textContent = 'üì§ –û—Ç–ø—Ä–∞–≤–ª—è—é...';
            debug.style.background = 'orange';

            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                try {
                    const testData = { test: "ok", timestamp: Date.now() };
                    Telegram.WebApp.sendData(JSON.stringify(testData));
                    debug.textContent = '‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!';
                    debug.style.background = 'green';
                    // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å—Ä–∞–∑—É ‚Äî –¥–∞—ë–º —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å
                    setTimeout(() => Telegram.WebApp.close(), 1000);
                } catch (e) {
                    debug.textContent = 'üí• –û—à–∏–±–∫–∞: ' + e.message;
                    debug.style.background = 'red';
                }
            } else {
                debug.textContent = '‚ùå WebApp –Ω–µ –Ω–∞–π–¥–µ–Ω';
                debug.style.background = 'red';
            }
        };
    </script>
</body>
</html>
